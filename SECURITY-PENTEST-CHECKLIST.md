# Checklist Persiapan Pentest — Meubeul Dua Putra

Dokumen singkat ini berisi langkah-langkah prioritas untuk persiapan pentest dan mitigasi awal berdasarkan scan cepat yang dijalankan.

## Ringkasan cepat hasil scan
- `composer audit`: Tidak ditemukan advisories.
- `npm audit`: Tidak ditemukan kerentanan (0 total).
- Scan kode statis: 1 penampilan `{!! nl2br(e($edukasi->konten)) !!}` pada `resources/views/edukasi/show.blade.php` — konten di-escape dengan `e()` tetapi dirender dengan `<br>`; tinjau sumber konten.
- Tidak ditemukan panggilan fungsi PHP berbahaya (`eval`, `exec`, `shell_exec`, dll.) di folder `app/`.
- Tidak ditemukan jejak penghilangan middleware CSRF di `app/`.

## Pengaturan Konfigurasi (prioritas tinggi)
- Pastikan environment produksi/staging:
  - `APP_DEBUG=false`
  - `APP_ENV=production`
  - `APP_URL` menggunakan `https://...`
  - `APP_KEY` terpasang (jangan commit nilainya ke repo)
- Pastikan variabel database dan kredensial produksi kuat (DB_PASSWORD tidak kosong di produksi).

## Header & Transport (prioritas tinggi)
- Aktifkan HTTPS dan `Strict-Transport-Security` (HSTS).
- Pastikan cookie menggunakan `Secure; HttpOnly; SameSite=Strict` bila memungkinkan.
- Review middleware CSP dan header security (middleware `SecureHeaders` sudah ada — pastikan direktif CSP valid dan tidak terlalu longgar).

## Dependensi (prioritas tinggi)
- Update paket yang memiliki advisories (jika ada) dan lakukan `composer install --no-dev` pada produksi.
- Jalankan `npm audit` berkala dan perbarui paket dev/prod bila perlu.

## Aplikasi & Kode (prioritas sedang)
- Hindari penggunaan `{!! !!}` untuk output user-generated tanpa sanitasi. Jika diperlukan (seperti `nl2br(e(...))`), pastikan `e()` diterapkan sebelum markup.
- Jalankan static analysis (phpstan/psalm) untuk menemukan tipe & panggilan berbahaya.
- Cari raw SQL (`DB::raw`, `selectRaw`, `whereRaw`) dan pastikan parameter di-bind.

## File upload & Storage (prioritas sedang)
- Validasi ekstensi & MIME type pada upload.
- Simpan file upload di luar `public` bila tidak perlu, gunakan pemeriksaan virus jika mungkin.
- Atur permission storage agar tidak dapat mengeksekusi file.

## Otentikasi & Rate limiting (prioritas sedang)
- Pastikan throttling login (Laravel throttle middleware) aktif untuk mencegah brute force.
- Periksa implementasi reset password dan email kebijakan rate limit.

## Logging, Backup & Monitoring (prioritas tinggi)
- Siapkan logging terpusat (mis. Papertrail, Sentry) dan snapshot DB/staging sebelum pentest.
- Aktifkan alert untuk anomali selama window pentest.

## Testing Dinamis (pentest) — langkah selanjutnya
1. Jalankan OWASP ZAP atau Nikto terhadap staging (bukan produksi) — berikan scope tujuan (URL, kredensial test).
2. Jalankan SQLMap pada parameter input kritis (search, product id) di staging dengan batas rate rendah.
3. Lakukan autentikasi fuzzing dan session fixation checks.

## Setelah pentest
- Terapkan perbaikan sesuai temuan, susun backlog prioritas, lalu jalankan retest pada staging.

---
Jika Anda mau, saya bisa menyiapkan script cepat untuk memulai OWASP ZAP scan terhadap staging (butuh URL dan kredensial test), atau menjalankan `phpstan` jika ingin. Beritahu langkah mana yang ingin dijalankan selanjutnya.
